-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- users Table Create SQL
-- 테이블 생성 SQL - users
CREATE TABLE users
(
    `userId`    INT            NOT NULL    AUTO_INCREMENT, 
    `name`      VARCHAR(45)    NULL, 
    `email`     VARCHAR(45)    NULL, 
    `password`  VARCHAR(45)    NULL, 
    `phone`     VARCHAR(45)    NULL, 
    `address`   VARCHAR(45)    NULL, 
    `imageURL`  TEXT           NULL, 
    `created`   TIMESTAMP      NULL, 
    `updated`   TIMESTAMP      NULL, 
    `status`    VARCHAR(20)    NULL, 
     PRIMARY KEY (userId)
);


-- post Table Create SQL
-- 테이블 생성 SQL - post
CREATE TABLE post
(
    `postId`      INT            NOT NULL    AUTO_INCREMENT, 
    `userId`      INT            NULL, 
    `likeCount`   TINYINT        NULL, 
    `title`       VARCHAR(45)    NULL, 
    `content`     TEXT           NULL, 
    `created`     TIMESTAMP      NULL, 
    `updated`     TIMESTAMP      NULL, 
    `price`       INT            NULL, 
    `status`      VARCHAR(20)    NULL, 
    `categoryId`  INT            NULL, 
     PRIMARY KEY (postId)
);

-- Foreign Key 설정 SQL - post(userId) -> users(userId)
ALTER TABLE post
    ADD CONSTRAINT FK_post_userId_users_userId FOREIGN KEY (userId)
        REFERENCES users (userId) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- Foreign Key 삭제 SQL - post(userId)
-- ALTER TABLE post
-- DROP FOREIGN KEY FK_post_userId_users_userId;


-- wishList Table Create SQL
-- 테이블 생성 SQL - wishList
CREATE TABLE wishList
(
    `wishListId`  INT            NOT NULL    AUTO_INCREMENT, 
    `userId`      INT            NULL, 
    `postId`      INT            NULL, 
    `created`     TIMESTAMP      NULL, 
    `updated`     TIMESTAMP      NULL, 
    `status`      VARCHAR(20)    NULL, 
     PRIMARY KEY (wishListId)
);

-- Foreign Key 설정 SQL - wishList(userId) -> users(userId)
ALTER TABLE wishList
    ADD CONSTRAINT FK_wishList_userId_users_userId FOREIGN KEY (userId)
        REFERENCES users (userId) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- Foreign Key 삭제 SQL - wishList(userId)
-- ALTER TABLE wishList
-- DROP FOREIGN KEY FK_wishList_userId_users_userId;


-- category Table Create SQL
-- 테이블 생성 SQL - category
CREATE TABLE category
(
    `categoryId`  INT            NOT NULL    AUTO_INCREMENT, 
    `category`    VARCHAR(45)    NULL, 
    `created`     TIMESTAMP      NULL, 
    `updated`     TIMESTAMP      NULL, 
    `status`      VARCHAR(20)    NULL, 
     PRIMARY KEY (categoryId)
);

-- Foreign Key 설정 SQL - category(categoryId) -> post(categoryId)
ALTER TABLE category
    ADD CONSTRAINT FK_category_categoryId_post_categoryId FOREIGN KEY (categoryId)
        REFERENCES post (categoryId) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- Foreign Key 삭제 SQL - category(categoryId)
-- ALTER TABLE category
-- DROP FOREIGN KEY FK_category_categoryId_post_categoryId;


-- postImage Table Create SQL
-- 테이블 생성 SQL - postImage
CREATE TABLE postImage
(
    `ImageId`   INT            NOT NULL    AUTO_INCREMENT, 
    `postId`    INT            NULL, 
    `imageURL`  TEXT           NULL, 
    `created`   TIMESTAMP      NULL, 
    `updated`   TIMESTAMP      NULL, 
    `status`    VARCHAR(20)    NULL, 
     PRIMARY KEY (ImageId)
);

-- Foreign Key 설정 SQL - postImage(postId) -> post(postId)
ALTER TABLE postImage
    ADD CONSTRAINT FK_postImage_postId_post_postId FOREIGN KEY (postId)
        REFERENCES post (postId) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- Foreign Key 삭제 SQL - postImage(postId)
-- ALTER TABLE postImage
-- DROP FOREIGN KEY FK_postImage_postId_post_postId;


